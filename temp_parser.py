# –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤ (GET, POST —Ç–æ—â–æ)
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è HTML-—Å—Ç–æ—Ä—ñ–Ω–æ–∫
import requests

# BeautifulSoup - –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É HTML —Ç–∞ XML
# –î–æ–∑–≤–æ–ª—è—î –∑—Ä—É—á–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ç–µ–≥–∞–º–∏, –∫–ª–∞—Å–∞–º–∏, –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
from bs4 import BeautifulSoup, Tag

# urllib - –≤–±—É–¥–æ–≤–∞–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ Python –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ URL-–∞–¥—Ä–µ—Å–∞–º–∏
# –§—É–Ω–∫—Ü—ñ—è urljoin –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ URL –∑ –≤—ñ–¥–Ω–æ—Å–Ω–∏–º–∏ —à–ª—è—Ö–∞–º–∏
# –ó–∞—Ö–∏—â–∞—î –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫ –∑—ñ —Å–ª–µ—à–∞–º–∏ ("/") –ø—Ä–∏ —Å–∫–ª–∞–¥–∞–Ω–Ω—ñ –∞–¥—Ä–µ—Å
from urllib.parse import urljoin

# fake_useragent - —Å—Ç–æ—Ä–æ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö User-Agent
# –Ü–º—ñ—Ç—É—î –∑–∞–ø–∏—Ç–∏ –≤—ñ–¥ —Ä—ñ–∑–Ω–∏—Ö –±—Ä–∞—É–∑–µ—Ä—ñ–≤ (Chrome, Firefox, Safari —Ç–æ—â–æ)
# –î–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–±–∏—Ç–∏ HTTP-–∑–∞–ø–∏—Ç —Å—Ö–æ–∂–∏–º –Ω–∞ –∑–∞–ø–∏—Ç –≤—ñ–¥ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
from fake_useragent import UserAgent

# urllib3 - —Å—Ç–æ—Ä–æ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ HTTP-–∑–∞–ø–∏—Ç–∞–º–∏
# Retry - –º–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö HTTP-–∑–∞–ø–∏—Ç—ñ–≤ —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–æ–∫ –∞–±–æ –∑–±–æ—ó–≤ –∑'—î–¥–Ω–∞–Ω–Ω—è
# –î–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –ø—Ä–∏ —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –ø–æ–º–∏–ª–∫–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞
# (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 500, 502, 503, 504)
from urllib3.util.retry import Retry

# HTTPAdapter - –¥–æ–∑–≤–æ–ª—è—î –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –º–µ—Ö–∞–Ω—ñ–∑–º Retry –¥–æ requests.Session
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤, —Ç–∞–π–º–∞—É—Ç—ñ–≤ —ñ –∞–¥–∞–ø—Ç–µ—Ä—ñ–≤ –∑'—î–¥–Ω–∞–Ω–Ω—è
from requests.adapters import HTTPAdapter

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä dataclass –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—ñ–≤ –¥–∞–Ω–∏—Ö
# –î–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–ª–∞—Å–∏, —è–∫—ñ:
# - –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å –¥–∞–Ω—ñ —É –≤–∏–≥–ª—è–¥—ñ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤
# - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—é—Ç—å –º–µ—Ç–æ–¥–∏ __init__, __repr__, __eq__ —Ç–∞ —ñ–Ω.
# - —Ä–æ–±–ª—è—Ç—å –∫–æ–¥ –±—ñ–ª—å—à —á–∏—Å—Ç–∏–º —Ç–∞ –∑—Ä—É—á–Ω–∏–º –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
from dataclasses import dataclass

@dataclass
class Product:
    # –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
    title: str
    # –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–æ–≤–∞—Ä—É
    description: str
    # –¶—ñ–Ω–∞ —É –≤–∏–≥–ª—è–¥—ñ —á–∏—Å–ª–∞ –∑ –ø–ª–∞–≤–∞—é—á–æ—é —Ç–æ—á–∫–æ—é
    price: float
    # –†–µ–π—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä—É (—Ü—ñ–ª–µ —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 5)
    rating: int
    # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤ –ø—Ä–æ —Ç–æ–≤–∞—Ä
    num_of_reviews: int

# –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö User-Agent
# –ö–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ user_agent.random –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—à–∏–π User-Agent –±—Ä–∞—É–∑–µ—Ä–∞
user_agent = UserAgent()

# –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö HTTP-–∑–∞–ø–∏—Ç—ñ–≤
retry_strategy = Retry(
    total=3,  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± (1 –æ—Å–Ω–æ–≤–Ω–∞ + 2 –ø–æ–≤—Ç–æ—Ä–∏)
    backoff_factor=1,  # –ë–∞–∑–æ–≤–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏ (—Å–µ–∫—É–Ω–¥–∏), –∑—Ä–æ—Å—Ç–∞—î –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ (1s...2s...4s)
    status_forcelist=[  # –ö–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫, –ø—Ä–∏ —è–∫–∏—Ö —Ç—Ä–µ–±–∞ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç
        429,  # Too Many Requests (–∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤, —Å–µ—Ä–≤–µ—Ä —Ç–∏–º—á–∞—Å–æ–≤–æ –±–ª–æ–∫—É—î)
        500,  # Internal Server Error (–≤–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)
        502,  # Bad Gateway (—Å–µ—Ä–≤–µ—Ä –æ—Ç—Ä–∏–º–∞–≤ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —ñ–Ω—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
        503,  # Service Unavailable (—Å–µ—Ä–≤–µ—Ä —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π)
        504  # Gateway Timeout (—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç—Ä–∏–º–∞–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —ñ–Ω—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
    ],
    # Retry –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–æ GET-–∑–∞–ø–∏—Ç—ñ–≤
    allowed_methods=["GET"]
)

# –°—Ç–≤–æ—Ä—é—î–º–æ HTTP-—Å–µ—Å—ñ—é
# Session –¥–æ–∑–≤–æ–ª—è—î:
# - –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è
# - –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ —à–≤–∏–¥—à–µ, –Ω—ñ–∂ requests.get()
# - –∑–∞–¥–∞–≤–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (headers, retry —Ç–æ—â–æ)
session = requests.Session()

# –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ retry-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –¥–ª—è HTTPS-–∑–∞–ø–∏—Ç—ñ–≤
session.mount("https://", HTTPAdapter(max_retries=retry_strategy))

# –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ retry-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –¥–ª—è HTTP-–∑–∞–ø–∏—Ç—ñ–≤
session.mount("http://", HTTPAdapter(max_retries=retry_strategy))

# –ë–∞–∑–æ–≤–∏–π –¥–æ–º–µ–Ω —Å–∞–π—Ç—É
BASE_URL = "https://webscraper.io/"

# –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –º–∞–≥–∞–∑–∏–Ω—É
# urljoin –ø–æ—î–¥–Ω—É—î –±–∞–∑–æ–≤–∏–π URL —Ç–∞ –≤—ñ–¥–Ω–æ—Å–Ω–∏–π —à–ª—è—Ö,
# –≥–∞—Ä–∞–Ω—Ç—É—é—á–∏ –∫–æ—Ä–µ–∫—Ç–Ω—É –∞–¥—Ä–µ—Å—É –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å–ª–µ—à—ñ–≤
HOME_URL = urljoin(BASE_URL, "test-sites/e-commerce/allinone/")

# HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ —ñ–º—ñ—Ç—É—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
HEADERS = {
    # –í–∏–ø–∞–¥–∫–æ–≤–∏–π User-Agent (Chrome, Firefox, Safari —Ç–æ—â–æ)
    'User-Agent': user_agent.random,
    # –¢–∏–ø–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É, —è–∫—ñ –æ—á—ñ–∫—É—î–º–æ –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞
    'Accept': (
        'text/html,application/xhtml+xml,application/xml;'
        'q=0.9,image/webp,*/*;q=0.8'
    ),
    # –ú–æ–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É (—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ —Ä—ñ–∑–Ω–∏–π HTML)
    'Accept-Language': 'en-US,en;q=0.5',
    # –ó'—î–¥–Ω–∞–Ω–Ω—è –Ω–µ –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É, –ø–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è
    'Connection': 'keep-alive',
    # –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç HTTPS, —è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–µ—Ä—Å—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    'Upgrade-Insecure-Requests': '1',
}

def get_home_products() -> list[Product]:
    """
    –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î HTML-–∫–æ–¥ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –º–∞–≥–∞–∑–∏–Ω—É
    —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ –æ–±'—î–∫—Ç—ñ–≤ Product –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏

    Returns:
        list[Product] - —Å–ø–∏—Å–æ–∫ –æ–±'—î–∫—Ç—ñ–≤ Product –∞–±–æ None —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏
    """
    try:
        # –í–∏–∫–æ–Ω—É—î–º–æ HTTP GET-–∑–∞–ø–∏—Ç –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        response = session.get(
            HOME_URL,  # URL —Å—Ç–æ—Ä—ñ–Ω–∫–∏
            headers=HEADERS,  # HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏
            timeout=10,  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (—Å–µ–∫—É–Ω–¥–∏)
            verify=True  # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SSL-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—É
        )

        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å—Ç–∞—Ç—É—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        response.raise_for_status()

        # –ì–µ–Ω–µ—Ä—É—î–º–æ –Ω–æ–≤–∏–π User-Agent –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É
        headers = HEADERS.copy()
        headers["User-Agent"] = user_agent.random

        # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç BeautifulSoup –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É HTML
        soup = BeautifulSoup(response.content, features="html.parser")

        # –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ HTML-–±–ª–æ–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤
        # ".card-body" - CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –æ–±–≥–æ—Ä—Ç–∞—î –∫–æ–∂–µ–Ω –±–ª–æ–∫ –∑ —Ç–æ–≤–∞—Ä–æ–º –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
        products = soup.select(".card-body")

        # –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–∂–µ–Ω HTML-–±–ª–æ–∫ –≤ –æ–±'—î–∫—Ç Product
        # - –≤–∏–∫–ª–∏–∫–∞—î–º–æ parse_single_product
        # - –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —Ç–æ–≤–∞—Ä –≤ –æ–±'—î–∫—Ç Product
        # –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –æ—Ç—Ä–∏–º—É—î–º–æ —Å–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤–∏—Ö Python-–æ–±'—î–∫—Ç—ñ–≤
        return [parse_single_product(product) for product in products]

    # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ HTTP –∞–±–æ –º–µ—Ä–µ–∂–µ—é
    except requests.exceptions.RequestException as e:
        print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–ø–∏—Ç—É: {e}")
        return None
    # –û–±—Ä–æ–±–∫–∞ –±—É–¥—å-—è–∫–∏—Ö —ñ–Ω—à–∏—Ö –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
    except Exception as e:
        print(f"‚ö†Ô∏è –ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–º–∏–ª–∫–∞: {e}")
        return None

def parse_single_product(product: Tag) -> Product:
    return Product(
        # –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
        # .select_one(".title") - —à—É–∫–∞—î –ø–µ—Ä—à–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑ –∫–ª–∞—Å–æ–º "title" –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–ª–æ–∫—É —Ç–æ–≤–∞—Ä—É
        # ["title"] - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è HTML-–∞—Ç—Ä–∏–±—É—Ç—É 'title'
        title=product.select_one(".title")["title"],

        # –û–ø–∏—Å —Ç–æ–≤–∞—Ä—É
        # .text - –ø–æ–≤–µ—Ä—Ç–∞—î –≤–µ—Å—å —Ç–µ–∫—Å—Ç –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ HTML-—Ç–µ–≥–∞
        description=product.select_one(".description").text,

        # –¶—ñ–Ω–∞ —Ç–æ–≤–∞—Ä—É
        # .text - –æ—Ç—Ä–∏–º—É—î–º–æ —Ä—è–¥–æ–∫ —Ç–∏–ø—É "$123.45"
        # .replace("$", "") - –ø—Ä–∏–±–∏—Ä–∞—î–º–æ —Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç–∏, —â–æ–± –∑–∞–ª–∏—à–∏–ª–∏—Å—è –ª–∏—à–µ —Ü–∏—Ñ—Ä–∏
        # float(...) - –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ–∫—Å—Ç –≤ —á–∏—Å–ª–æ –∑ –ø–ª–∞–≤–∞—é—á–æ—é –∫—Ä–∞–ø–∫–æ—é
        price=float(
            product
            .select_one(".price")
            .text
            .replace("$", "")
        ),

        # –†–µ–π—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä—É
        # [data-rating] - HTML-–∞—Ç—Ä–∏–±—É—Ç –∑ —á–∏—Å–ª–æ–≤–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º —Ä–µ–π—Ç–∏–Ω–≥—É
        # int(...) - –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –≤ —Ü—ñ–ª–µ —á–∏—Å–ª–æ
        rating=int(
            product
            .select_one("[data-rating]")["data-rating"]
        ),

        # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤
        # .text - —Ä—è–¥–æ–∫ —Ç–∏–ø—É "12 reviews"
        # .split()[0] - —Ä–æ–∑–±–∏–≤–∞—î–º–æ —Ä—è–¥–æ–∫ –∑–∞ –ø—Ä–æ–±—ñ–ª–æ–º —Ç–∞ –æ—Ç—Ä–∏–º—É—î–º–æ –ø–µ—Ä—à–µ —Å–ª–æ–≤–æ ("12")
        # int(...) - –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –ø–µ—Ä—à–µ —Å–ª–æ–≤–æ –≤ —á–∏—Å–ª–æ
        num_of_reviews=int(
            product
            .select_one(".review-count")
            .text
            .split()[0]
        )
    )

def main():
    """
    –ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∫–µ—Ä—É—î –ª–æ–≥—ñ–∫–æ—é —Ä–æ–±–æ—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞
    –í–∏–∫–æ–Ω—É—î –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤.
    """
    try:
        # –û—Ç—Ä–∏–º—É—î–º–æ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤
        products = get_home_products()

        if products:
            print("‚úÖ –î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –æ—Ç—Ä–∏–º–∞–Ω–æ —Ç–∞ –æ–±—Ä–æ–±–ª–µ–Ω–æ!\n")

            # –í–∏–≤–æ–¥–∏–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–µ—Ä—à—ñ 3 —Ç–æ–≤–∞—Ä–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
            for index, product in enumerate(products, 1):
                print(f"{index}. {product}")
        else:
            print("‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∞–±–æ —Å–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.")

    except KeyboardInterrupt:
        print("\nüõë –†–æ–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–µ—Ä–µ—Ä–≤–∞–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.")
    except Exception as e:
        print(f"‚ùå –ö—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞: {e}")
    finally:
        # –û–±–æ–≤'—è–∑–∫–æ–≤–æ –∑–∞–∫—Ä–∏–≤–∞—î–º–æ —Å–µ—Å—ñ—é
        session.close()

if __name__ == "__main__":
    main()